<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ëŸ¬ë¸ŒìŠ¤í† ë¦¬ ì–´ë“œë²¤ì²˜ - ëŒ€í•™ìƒ ì—°ì•  ì‹œë®¬ë ˆì´ì…˜ ê²Œì„">
  <title>ëŸ¬ë¸ŒìŠ¤í† ë¦¬ ì–´ë“œë²¤ì²˜</title>
  
  <style>
    /* CSS ë³€ìˆ˜ ì •ì˜ */
    :root {
      --primary-bg: #0f0f1e;
      --container-bg: #1a1a2e;
      --text-color: #e8e8e8;
      --choice-bg: #2d2d44;
      --choice-hover: #3d3d5c;
      --status-color: #a8a8b8;
      --affection-color: #ff6b9d;
      --container-width: min(900px, 95vw);
    }

    /* ì „ì—­ ë¦¬ì…‹ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* ë°”ë”” ìŠ¤íƒ€ì¼ */
    body {
      background: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 50%, #16213e 100%);
      color: var(--text-color);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    /* ê²Œì„ ì»¨í…Œì´ë„ˆ */
    #game-container {
      width: var(--container-width);
      background: rgba(26, 26, 46, 0.95);
      backdrop-filter: blur(10px);
      padding: 35px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      position: relative;
      z-index: 1;
      animation: fadeIn 0.8s ease-out;
    }

    @keyframes fadeIn {
      from { 
        opacity: 0; 
        transform: translateY(20px);
      }
      to { 
        opacity: 1; 
        transform: translateY(0);
      }
    }

    /* ì»¨íŠ¸ë¡¤ ë²„íŠ¼ */
    #control-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .control-btn {
      padding: 8px 14px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      color: var(--text-color);
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
    }

    .control-btn:hover {
      background: rgba(255,255,255,0.1);
      transform: translateY(-1px);
    }

    /* ì”¬ ì •ë³´ */
    #scene-info {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      font-size: 13px;
      color: var(--status-color);
      flex-wrap: wrap;
      justify-content: center;
    }

    .scene-tag {
      padding: 4px 10px;
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    /* í…ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ */
    #text-container {
      min-height: 200px;
      margin-bottom: 25px;
      padding: 25px;
      background: rgba(0,0,0,0.2);
      border-radius: 15px;
      border: 1px solid rgba(255,255,255,0.05);
    }

    #character-name {
      font-size: 14px;
      color: var(--affection-color);
      margin-bottom: 10px;
      font-weight: 600;
    }

    #text {
      font-size: 18px;
      line-height: 1.7;
      white-space: pre-line;
      word-wrap: break-word;
    }

    .typing-cursor::after {
      content: 'â–‹';
      animation: blink 1s infinite;
      color: var(--affection-color);
      opacity: 0.7;
    }

    @keyframes blink {
      0%, 49% { opacity: 0.7; }
      50%, 100% { opacity: 0; }
    }

    /* ì„ íƒì§€ */
    #choices {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .choice {
      padding: 14px 20px;
      background: var(--choice-bg);
      border: 2px solid transparent;
      border-radius: 12px;
      color: var(--text-color);
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: inherit;
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .choice:hover {
      background: var(--choice-hover);
      transform: translateX(5px);
      border-color: rgba(102, 126, 234, 0.3);
    }

    .choice:active {
      transform: scale(0.98);
    }

    .choice-tone {
      font-size: 20px;
      opacity: 0.7;
    }

    /* í˜¸ê°ë„ ë°” */
    #affection-container {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: rgba(255,107,157,0.05);
      border-radius: 12px;
      border: 1px solid rgba(255,107,157,0.2);
      margin-top: 20px;
    }

    #affection-icon {
      font-size: 24px;
      animation: heartbeat 2s infinite;
    }

    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      10%, 30% { transform: scale(1.1); }
      20% { transform: scale(1.05); }
    }

    #affection-bar {
      flex: 1;
      height: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 5px;
      overflow: hidden;
    }

    #affection-fill {
      height: 100%;
      background: linear-gradient(90deg, #ff6b9d, #ff8787);
      transition: width 0.8s ease;
    }

    #affection-value {
      font-size: 16px;
      font-weight: bold;
      min-width: 60px;
      text-align: center;
    }

    /* ì•Œë¦¼ */
    .notification {
      position: fixed;
      top: 30px;
      right: 30px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      padding: 15px 20px;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      animation: notificationSlide 0.5s ease-out;
      z-index: 1000;
      color: white;
      font-size: 14px;
      max-width: 300px;
    }

    @keyframes notificationSlide {
      from { 
        transform: translateX(400px);
        opacity: 0;
      }
      to { 
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* ë¡œë”© í™”ë©´ */
    #loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--primary-bg);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }

    .loader {
      width: 60px;
      height: 60px;
      border: 3px solid rgba(255,255,255,0.1);
      border-top-color: var(--affection-color);
      border-radius: 50%;
      animation: spin 1s infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      #game-container {
        padding: 20px;
        border-radius: 0;
        width: 100%;
        min-height: 100vh;
      }
      
      #text {
        font-size: 16px;
      }
      
      .choice {
        font-size: 14px;
        padding: 12px 16px;
      }
      
      .notification {
        right: 10px;
        left: 10px;
        max-width: calc(100% - 20px);
      }
    }
  </style>
</head>
<body>
  <!-- ë¡œë”© í™”ë©´ -->
  <div id="loading">
    <div class="loader"></div>
    <p style="margin-top: 20px; color: #a8a8b8;">ê²Œì„ì„ ì¤€ë¹„í•˜ëŠ” ì¤‘...</p>
  </div>

  <!-- ê²Œì„ ì»¨í…Œì´ë„ˆ -->
  <div id="game-container" style="display: none;">
    <!-- ì»¨íŠ¸ë¡¤ ë²„íŠ¼ -->
    <div id="control-buttons">
      <button class="control-btn" onclick="game.saveGame()">ğŸ’¾ ì €ì¥</button>
      <button class="control-btn" onclick="game.loadGame()">ğŸ“ ë¶ˆëŸ¬ì˜¤ê¸°</button>
      <button class="control-btn" onclick="game.resetGame()">ğŸ”„ ì´ˆê¸°í™”</button>
    </div>

    <!-- ì”¬ ì •ë³´ -->
    <div id="scene-info">
      <span class="scene-tag">ğŸ“ <span id="location">ëŒ€í•™êµ</span></span>
      <span class="scene-tag">ğŸ• <span id="time">ì˜¤í›„</span></span>
    </div>

    <!-- í…ìŠ¤íŠ¸ ì˜ì—­ -->
    <div id="text-container">
      <div id="character-name" style="display: none;"></div>
      <div id="text">ê²Œì„ì„ ì‹œì‘í•˜ëŠ” ì¤‘...</div>
    </div>
    
    <!-- ì„ íƒì§€ ì˜ì—­ -->
    <div id="choices"></div>
    
    <!-- í˜¸ê°ë„ í‘œì‹œ -->
    <div id="affection-container">
      <span id="affection-icon">ğŸ’•</span>
      <div id="affection-bar">
        <div id="affection-fill" style="width: 10%"></div>
      </div>
      <span id="affection-value">1/10</span>
    </div>
  </div>

  <script>
    // ==========================================
    // ì‹œë‚˜ë¦¬ì˜¤ ë°ì´í„° (ì™„ì „í•œ ë²„ì „)
    // ==========================================
    const SCENARIO_DATA = {
      "start": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 3ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "ì¡°ìš©í•œ ë„ì„œê´€, ì°½ë¬¸ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ë”°ìŠ¤í•œ í–‡ì‚´ì´ ì±…ìƒì„ ë¹„ì¶”ê³  ìˆë‹¤.\n\nì‹œí—˜ê³µë¶€ì— ì§‘ì¤‘í•˜ë˜ ì¤‘, ë§ì€í¸ ìë¦¬ì— ëˆ„êµ°ê°€ ì•‰ëŠ” ì†Œë¦¬ê°€ ë“¤ë¦°ë‹¤.\nê³ ê°œë¥¼ ë“¤ì–´ë³´ë‹ˆ ê°™ì€ ìˆ˜ì—…ì„ ë“£ëŠ” ë¯¸ë‚˜ê°€ ìˆ˜ì¤ê²Œ ì›ƒìœ¼ë©° ì¸ì‚¬í•œë‹¤.\n\n\"ì•ˆë…•? ì—¬ê¸° ì•‰ì•„ë„ ë ê¹Œ?\"",
        "choices": [
          {
            "text": "ë¬¼ë¡ ì´ì§€! ê°™ì´ ê³µë¶€í•˜ë©´ ë” ì¢‹ì§€.",
            "tone": "ğŸ˜Š",
            "next": "friendly_start",
            "affection": 2
          },
          {
            "text": "ì‘, ì•‰ì•„ë„ ë¼.",
            "tone": "ğŸ˜",
            "next": "neutral_start",
            "affection": 0
          },
          {
            "text": "... (ê·¸ëƒ¥ ê³ ê°œë§Œ ë„ë•ì¸ë‹¤)",
            "tone": "ğŸ˜¶",
            "next": "cold_start",
            "affection": -1
          }
        ]
      },
      
      "friendly_start": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 3ì‹œ 30ë¶„",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ì˜ ì–¼êµ´ì´ í™˜í•˜ê²Œ ë°ì•„ì§„ë‹¤.\n\n\"ê³ ë§ˆì›Œ! ì‚¬ì‹¤ ì´ ê³¼ëª© ë„ˆë¬´ ì–´ë ¤ì›Œì„œ í˜¼ì ê³µë¶€í•˜ê¸° ë§‰ë§‰í–ˆê±°ë“ .\"\n\nê·¸ë…€ê°€ ê°€ë°©ì—ì„œ ë…¸íŠ¸ë¥¼ êº¼ë‚´ë©° ë§ì„ ì´ì–´ê°„ë‹¤.\n\"í˜¹ì‹œ 3ì¥ ë‚´ìš© ì´í•´í–ˆì–´? êµìˆ˜ë‹˜ ì„¤ëª…ì´ ë„ˆë¬´ ë¹¨ë¼ì„œ...\"",
        "choices": [
          {
            "text": "ë‚´ ë…¸íŠ¸ ê°™ì´ ë³´ë©´ì„œ ì„¤ëª…í•´ì¤„ê²Œ!",
            "tone": "ğŸ¤",
            "next": "study_together",
            "affection": 2
          },
          {
            "text": "ë‚˜ë„ ì˜ ëª¨ë¥´ê² ì–´. ê°™ì´ ë‹¤ì‹œ ì½ì–´ë³¼ê¹Œ?",
            "tone": "ğŸ“š",
            "next": "study_together",
            "affection": 1
          }
        ]
      },
      
      "neutral_start": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 3ì‹œ 30ë¶„",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ê°€ ì¡°ìš©íˆ ìë¦¬ì— ì•‰ëŠ”ë‹¤.\n\nì ì‹œ ì–´ìƒ‰í•œ ì¹¨ë¬µì´ íë¥¸ í›„, ê·¸ë…€ê°€ ì‘ì€ ëª©ì†Œë¦¬ë¡œ ë§í•œë‹¤.\n\n\"ì €... í˜¹ì‹œ ì´ë²ˆ ì£¼ ê³¼ì œ í–ˆì–´? ë¬¸ì œ 3ë²ˆì´ ë„ˆë¬´ ì–´ë ¤ì›Œì„œ...\"",
        "choices": [
          {
            "text": "ì•„, ê·¸ê±°? ì–´ì œ ê²¨ìš° í’€ì—ˆì–´. ë„ì™€ì¤„ê¹Œ?",
            "tone": "ğŸ˜Š",
            "next": "help_homework",
            "affection": 2
          },
          {
            "text": "ì‘, í–ˆì–´. êµì¬ ì˜ˆì œ ì°¸ê³ í•˜ë©´ ë¼.",
            "tone": "ğŸ’¡",
            "next": "give_hint",
            "affection": 0
          }
        ]
      },
      
      "cold_start": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 3ì‹œ 30ë¶„",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ê°€ ì–´ìƒ‰í•˜ê²Œ ìë¦¬ì— ì•‰ìœ¼ë©° ì‘ê²Œ í•œìˆ¨ì„ ì‰°ë‹¤.\n\nê·¸ë…€ëŠ” ì¡°ìš©íˆ ì±…ì„ í´ê³  ê³µë¶€ë¥¼ ì‹œì‘í•œë‹¤.\ní•˜ì§€ë§Œ ê°€ë”ì”© ë„ì›€ì´ í•„ìš”í•œ ë“¯ ì´ìª½ì„ íë”ê±°ë¦°ë‹¤.\n\n30ë¶„ì¯¤ ì§€ë‚¬ì„ê¹Œ, ê·¸ë…€ê°€ ì¼ì–´ë‚˜ë ¤ëŠ” ê²ƒì´ ë³´ì¸ë‹¤.",
        "choices": [
          {
            "text": "ì–´... ë²Œì¨ ê°€? ë‚´ê°€ ë¶ˆí¸í•˜ê²Œ í–ˆë‹¤ë©´ ë¯¸ì•ˆí•´.",
            "tone": "ğŸ˜°",
            "next": "apologize",
            "affection": 1
          },
          {
            "text": "(ì•„ë¬´ ë§ ì—†ì´ ê³„ì† ê³µë¶€í•œë‹¤)",
            "tone": "ğŸ˜‘",
            "next": "bad_ending",
            "affection": -2
          }
        ]
      },
      
      "study_together": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 5ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "ë‘ ì‹œê°„ ë™ì•ˆ í•¨ê»˜ ê³µë¶€í•œ ëì—, ì–´ë ¤ì› ë˜ ë¶€ë¶„ë“¤ì´ í•˜ë‚˜ì”© ì´í•´ë˜ê¸° ì‹œì‘í•œë‹¤.\n\në¯¸ë‚˜ê°€ ë°ê²Œ ì›ƒìœ¼ë©° ê¸°ì§€ê°œë¥¼ ì¼ ë‹¤.\n\"ì™€, ë•ë¶„ì— ì •ë§ ë§ì´ ì´í•´í–ˆì–´! ë„ˆ ì„¤ëª… ì§„ì§œ ì˜í•œë‹¤.\"\n\n\"ë°°ê³ í”„ì§€ ì•Šì•„? ê°™ì´ í•™ì‹ ë¨¹ìœ¼ëŸ¬ ê°ˆë˜?\"",
        "choices": [
          {
            "text": "ì¢‹ì•„! ì˜¤ëŠ˜ì€ ë‚´ê°€ ì‚´ê²Œ.",
            "tone": "ğŸ½ï¸",
            "next": "dinner_together",
            "affection": 3
          },
          {
            "text": "ê·¸ë˜, ê°™ì´ ê°€ì!",
            "tone": "ğŸ˜„",
            "next": "dinner_together",
            "affection": 1
          }
        ]
      },
      
      "help_homework": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 4ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ì˜ ì–¼êµ´ì´ ë°ì•„ì§„ë‹¤.\n\n\"ì •ë§? ê³ ë§ˆì›Œ! ì´ë ‡ê²Œ ì¹œì ˆí•œ ì‚¬ëŒì€ ì²˜ìŒì´ì•¼.\"\n\ní•¨ê»˜ ë¬¸ì œë¥¼ í’€ì–´ê°€ë©° ì ì  ê°€ê¹Œì›Œì§€ëŠ” ê²ƒì„ ëŠë‚€ë‹¤.\nê·¸ë…€ê°€ ìˆ˜ì¤ê²Œ ì›ƒìœ¼ë©° ë§í•œë‹¤.\n\n\"ë„ˆë‘ ê³µë¶€í•˜ë‹ˆê¹Œ í›¨ì”¬ ì¬ë°Œë„¤. ë‹¤ìŒì—ë„ ê°™ì´ ê³µë¶€í• ë˜?\"",
        "choices": [
          {
            "text": "ë‹¹ì—°í•˜ì§€! ì–¸ì œë“ ì§€ ì¢‹ì•„.",
            "tone": "ğŸ’•",
            "next": "promise_study",
            "affection": 2
          },
          {
            "text": "ì‘, ì‹œê°„ ë§ìœ¼ë©´ ê°™ì´í•˜ì.",
            "tone": "ğŸ“…",
            "next": "casual_promise",
            "affection": 1
          }
        ]
      },
      
      "give_hint": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 4ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ê°€ ê³ ê°œë¥¼ ë„ë•ì´ë©° êµì¬ë¥¼ í¼ì¹œë‹¤.\n\n\"ì•„, ê·¸ë˜? í•œ ë²ˆ ì°¾ì•„ë³¼ê²Œ. ê³ ë§ˆì›Œ.\"\n\nê·¸ë…€ëŠ” ì¡°ìš©íˆ ê³µë¶€ë¥¼ ì‹œì‘í•œë‹¤.\nì ì‹œ í›„ ë¯¸ë‚˜ê°€ ë‹¤ì‹œ ë§ì„ ê±´ë‹¤.\n\n\"í˜¹ì‹œ... ê°™ì´ ê³µë¶€í• ë˜? í˜¼ìë³´ë‹¤ëŠ” ë‚˜ì„ ê²ƒ ê°™ì•„ì„œ.\"",
        "choices": [
          {
            "text": "ì¢‹ì•„, ê°™ì´ í•˜ì!",
            "tone": "ğŸ˜Š",
            "next": "study_together",
            "affection": 1
          },
          {
            "text": "ë¯¸ì•ˆ, ë‚˜ëŠ” í˜¼ìê°€ í¸í•´ì„œ...",
            "tone": "ğŸ˜”",
            "next": "study_alone",
            "affection": -1
          }
        ]
      },
      
      "apologize": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 4ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ê°€ ë©ˆì¶°ì„œì„œ ëŒì•„ë³¸ë‹¤.\n\n\"ì•„ë‹ˆì•¼, ë„¤ê°€ ë¯¸ì•ˆí•  ê±´ ì—†ì–´. ë‚˜ë„ ê°‘ìê¸° ì™€ì„œ...\"\n\nê·¸ë…€ê°€ ë‹¤ì‹œ ìë¦¬ì— ì•‰ëŠ”ë‹¤.\n\"ì‚¬ì‹¤ ê°™ì´ ê³µë¶€í•˜ê³  ì‹¶ì—ˆê±°ë“ . í˜¼ìëŠ” ë„ˆë¬´ ë§‰ë§‰í•´ì„œ.\"\n\n\"ê°™ì´ í•´ë„ ë ê¹Œ?\"",
        "choices": [
          {
            "text": "ê·¸ëŸ¼ ê°™ì´ í•˜ì! ë‚˜ë„ ë„ì›€ì´ í•„ìš”í–ˆì–´.",
            "tone": "ğŸ˜Š",
            "next": "study_together",
            "affection": 2
          },
          {
            "text": "ì•Œê² ì–´. ì¡°ìš©íˆ í•˜ì.",
            "tone": "ğŸ¤«",
            "next": "study_quietly",
            "affection": 0
          }
        ]
      },
      
      "dinner_together": {
        "location": "í•™ìƒ ì‹ë‹¹",
        "time": "ì˜¤í›„ 6ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "í•™ìƒ ì‹ë‹¹ìœ¼ë¡œ ê±¸ì–´ê°€ëŠ” ê¸¸, ì €ë…ë…¸ì„ì´ ìº í¼ìŠ¤ë¥¼ í™©ê¸ˆë¹›ìœ¼ë¡œ ë¬¼ë“¤ì¸ë‹¤.\n\në¯¸ë‚˜ê°€ ìˆ˜ì¤ê²Œ ì›ƒìœ¼ë©° ë§í•œë‹¤.\n\"ìˆì–ì•„... ì‚¬ì‹¤ ë„ˆí•œí…Œ í•˜ê³  ì‹¶ì€ ë§ì´ ìˆì–´.\"\n\nê·¸ë…€ê°€ ì ì‹œ ë§ì„¤ì´ë‹¤ê°€ ìš©ê¸°ë¥¼ ë‚¸ë‹¤.\n\"ìš°ë¦¬... ì•ìœ¼ë¡œë„ ìì£¼ ë§Œë‚  ìˆ˜ ìˆì„ê¹Œ?\"",
        "choices": [
          {
            "text": "ë‚˜ë„ ë„ˆë‘ ë” ì¹œí•´ì§€ê³  ì‹¶ì—ˆì–´.",
            "tone": "ğŸ’•",
            "next": "good_ending",
            "affection": 3
          },
          {
            "text": "ì‘, ì¢‹ì€ ì¹œêµ¬ê°€ ë  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„.",
            "tone": "ğŸ¤",
            "next": "friend_ending",
            "affection": 1
          }
        ]
      },
      
      "promise_study": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 5ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ê°€ í™˜í•˜ê²Œ ì›ƒëŠ”ë‹¤.\n\n\"ì•½ì†ì´ì•¼! ë‚´ì¼ë„ ê°™ì€ ì‹œê°„ì— ì—¬ê¸°ì„œ ë§Œë‚˜ì.\"\n\nê·¸ë…€ê°€ ê°€ë°©ì„ ì±™ê¸°ë©° ë§ë¶™ì¸ë‹¤.\n\"ì»¤í”¼ ì‚¬ì˜¬ê²Œ. ë„¤ê°€ ì¢‹ì•„í•˜ëŠ” ê±° ë­ì•¼?\"\n\n\"ìš°ë¦¬ ì •ë§ ì¢‹ì€ ì¹œêµ¬ê°€ ë  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„!\"",
        "choices": [
          {
            "text": "ë‚˜ë„ ê·¸ë ‡ê²Œ ìƒê°í•´. ë‚´ì¼ ë´!",
            "tone": "ğŸ˜Š",
            "next": "promise_ending",
            "affection": 2
          }
        ]
      },
      
      "casual_promise": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 5ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ê°€ ê³ ê°œë¥¼ ë„ë•ì¸ë‹¤.\n\n\"ê·¸ë˜, ë¶€ë‹´ ê°–ì§€ ë§ê³  í¸í•˜ê²Œ ë§Œë‚˜ì.\"\n\nì„œë¡œ ì—°ë½ì²˜ë¥¼ êµí™˜í•œë‹¤.\n\"ê·¸ëŸ¼ ì—°ë½í• ê²Œ. ì˜¤ëŠ˜ ê³ ë§ˆì› ì–´!\"",
        "choices": [
          {
            "text": "ì‘, ë‚˜ë„ ê³ ë§ˆì› ì–´. ì¡°ì‹¬íˆ ê°€!",
            "tone": "ğŸ‘‹",
            "next": "casual_ending",
            "affection": 1
          }
        ]
      },
      
      "study_quietly": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 5ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "ì¡°ìš©í•œ ì‹œê°„ì´ íë¥¸ë‹¤.\n\nê°€ë” ì„œë¡œ ëˆˆì´ ë§ˆì£¼ì¹˜ë©´ ì‘ê²Œ ë¯¸ì†Œë¥¼ ì§“ëŠ”ë‹¤.\ní•´ê°€ ì§€ê³  ë„ì„œê´€ì´ ì–´ë‘ì›Œì§ˆ ë¬´ë µ, ë¯¸ë‚˜ê°€ ì¼ì–´ì„ ë‹¤.\n\n\"ìˆ˜ê³ í–ˆì–´. ë•ë¶„ì— ì§‘ì¤‘ì´ ì˜ ëì–´. ë˜ ë´!\"",
        "choices": [
          {
            "text": "ì‘, ìˆ˜ê³ í–ˆì–´. ë‹¤ìŒì— ë˜ ë§Œë‚˜ì.",
            "tone": "ğŸ˜Š",
            "next": "neutral_ending",
            "affection": 1
          }
        ]
      },
      
      "study_alone": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 5ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ê°€ ì‹¤ë§í•œ í‘œì •ì„ ê°ì¶”ë©° ê³ ê°œë¥¼ ë„ë•ì¸ë‹¤.\n\n\"ì•„... ì•Œê² ì–´. ë°©í•´í•´ì„œ ë¯¸ì•ˆí•´.\"\n\nê·¸ë…€ëŠ” ì¡°ìš©íˆ ìë¦¬ë¡œ ëŒì•„ê°„ë‹¤.\nì ì‹œ í›„ ë¯¸ë‚˜ê°€ ì§ì„ ì±™ê²¨ ë„ì„œê´€ì„ ë– ë‚œë‹¤.",
        "choices": [
          {
            "text": "(ì•„ì‰¬ì›€ì´ ë‚¨ëŠ”ë‹¤...)",
            "tone": "ğŸ˜”",
            "next": "regret_ending",
            "affection": 0
          }
        ]
      },
      
      // ========== ì—”ë”© ì¥ë©´ë“¤ ==========
      "good_ending": {
        "location": "ìº í¼ìŠ¤ ë²¤ì¹˜",
        "time": "ì €ë…",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ì˜ ì–¼êµ´ì´ ì €ë…ë…¸ì„ì²˜ëŸ¼ ë¶‰ê²Œ ë¬¼ë“ ë‹¤.\n\n\"ì •ë§? ì‚¬ì‹¤... ë‚˜ë„ ê·¸ë˜. ì²˜ìŒ ë§Œë‚¬ì„ ë•Œë¶€í„° ë„¤ê°€ ì‹ ê²½ ì“°ì˜€ì–´.\"\n\nê·¸ë…€ê°€ ë‹¹ì‹ ì˜ ì†ì„ ì‚´ì§ ì¡ëŠ”ë‹¤.\n\"ìš°ë¦¬... ì´ì œ ì¹œêµ¬ ì´ìƒì´ ë  ìˆ˜ ìˆì„ê¹Œ?\"\n\nğŸ’• í•´í”¼ ì—”ë”© - ìƒˆë¡œìš´ ì‹œì‘ ğŸ’•\ní˜¸ê°ë„ ìµœëŒ€ì¹˜ ë‹¬ì„±!",
        "ending": true,
        "choices": [
          {
            "text": "ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",
            "tone": "ğŸ”„",
            "next": "start",
            "reset": true
          }
        ]
      },
      
      "bad_ending": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 4ì‹œ",
        "character": "",
        "text": "ë¯¸ë‚˜ê°€ ì¡°ìš©íˆ ì§ì„ ì±™ê¸°ë©° ì¼ì–´ì„ ë‹¤.\n\nê·¸ë…€ê°€ ë– ë‚˜ê°„ ìë¦¬ì—ëŠ” ì•„ì‰¬ì›€ë§Œ ë‚¨ëŠ”ë‹¤.\nì–´ì©Œë©´ ì¢‹ì€ ì¸ì—°ì´ ë  ìˆ˜ ìˆì—ˆì„ì§€ë„...\n\nğŸ˜¢ ë°°ë“œ ì—”ë”© - ë†“ì¹œ ê¸°íšŒ ğŸ˜¢",
        "ending": true,
        "choices": [
          {
            "text": "ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",
            "tone": "ğŸ”„",
            "next": "start",
            "reset": true
          }
        ]
      },
      
      "regret_ending": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì €ë…",
        "character": "",
        "text": "í˜¼ì ë‚¨ì€ ë„ì„œê´€.\n\nì™œ ê·¸ë ‡ê²Œ ì°¨ê°‘ê²Œ ëŒ€í–ˆì„ê¹Œ...\ní›„íšŒê°€ ë°€ë ¤ì˜¨ë‹¤.\n\nğŸ˜” ë°°ë“œ ì—”ë”© - í›„íšŒ ğŸ˜”",
        "ending": true,
        "choices": [
          {
            "text": "ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",
            "tone": "ğŸ”„",
            "next": "start",
            "reset": true
          }
        ]
      }
    };

    // ==========================================
    // ê²Œì„ ì—”ì§„ í´ë˜ìŠ¤
    // ==========================================
    class AdventureGame {
      constructor() {
        this.currentScene = 'start';
        this.affection = 1;
        this.maxAffection = 10;
        this.history = [];
        this.typingSpeed = 25;
        this.typingTimer = null;
        this.skipMode = false;
      }

      init() {
        // ë¡œë”© í™”ë©´ ìˆ¨ê¸°ê¸°
        setTimeout(() => {
          const loading = document.getElementById('loading');
          loading.style.opacity = '0';
          setTimeout(() => {
            loading.style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            this.showScene(this.currentScene);
          }, 500);
        }, 1000);
      }

      showScene(sceneId) {
        const scene = SCENARIO_DATA[sceneId];
        if (!scene) {
          console.error('Scene not found:', sceneId);
          this.showNotification('ì¥ë©´ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!', 'âŒ');
          return;
        }

        this.currentScene = sceneId;
        
        // ì”¬ ì •ë³´ ì—…ë°ì´íŠ¸
        if (scene.location) {
          document.getElementById('location').textContent = scene.location;
        }
        if (scene.time) {
          document.getElementById('time').textContent = scene.time;
        }
        
        // ìºë¦­í„° ì´ë¦„ í‘œì‹œ
        const charName = document.getElementById('character-name');
        if (scene.character && scene.character !== "") {
          charName.textContent = scene.character;
          charName.style.display = 'block';
        } else {
          charName.style.display = 'none';
        }
        
        // í…ìŠ¤íŠ¸ íƒ€ì´í•‘ íš¨ê³¼
        this.typeWriter(scene.text, () => {
          this.showChoices(scene.choices);
        });
      }

      typeWriter(text, callback) {
        const textElement = document.getElementById('text');
        textElement.innerHTML = '';
        textElement.classList.add('typing-cursor');
        
        if (this.typingTimer) {
          clearTimeout(this.typingTimer);
        }
        
        // ìŠ¤í‚µ ëª¨ë“œì¼ ë•ŒëŠ” ì¦‰ì‹œ í‘œì‹œ
        if (this.skipMode) {
          textElement.innerHTML = text.replace(/\n/g, '<br>');
          textElement.classList.remove('typing-cursor');
          if (callback) callback();
          return;
        }
        
        let i = 0;
        const type = () => {
          if (i < text.length) {
            if (text.charAt(i) === '\n') {
              textElement.innerHTML += '<br>';
            } else {
              textElement.innerHTML += text.charAt(i);
            }
            i++;
            this.typingTimer = setTimeout(type, this.typingSpeed);
          } else {
            textElement.classList.remove('typing-cursor');
            if (callback) callback();
          }
        };
        type();
      }

      showChoices(choices) {
        const choicesElement = document.getElementById('choices');
        choicesElement.innerHTML = '';
        
        choices.forEach((choice, index) => {
          const button = document.createElement('button');
          button.className = 'choice';
          
          const textSpan = document.createElement('span');
          textSpan.textContent = choice.text;
          button.appendChild(textSpan);
          
          if (choice.tone) {
            const toneSpan = document.createElement('span');
            toneSpan.className = 'choice-tone';
            toneSpan.textContent = choice.tone;
            button.appendChild(toneSpan);
          }
          
          button.onclick = () => this.selectChoice(choice);
          
          // ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ ì§€ì—°
          button.style.animationDelay = `${index * 0.1}s`;
          
          choicesElement.appendChild(button);
        });
      }

      selectChoice(choice) {
        // íˆìŠ¤í† ë¦¬ ì €ì¥
        this.history.push({
          scene: this.currentScene,
          choice: choice.text,
          timestamp: Date.now()
        });
        
        // í˜¸ê°ë„ ì—…ë°ì´íŠ¸
        if (choice.affection !== undefined) {
          this.updateAffection(choice.affection);
        }
        
        // ë¦¬ì…‹ ì²˜ë¦¬
        if (choice.reset) {
          this.reset();
        }
        
        // ë‹¤ìŒ ì”¬ìœ¼ë¡œ
        this.showScene(choice.next);
      }

      updateAffection(delta) {
        const oldAffection = this.affection;
        this.affection = Math.max(1, Math.min(this.maxAffection, this.affection + delta));
        
        // UI ì—…ë°ì´íŠ¸
        const fill = document.getElementById('affection-fill');
        const value = document.getElementById('affection-value');
        const percentage = (this.affection / this.maxAffection) * 100;
        
        fill.style.width = percentage + '%';
        value.textContent = `${this.affection}/${this.maxAffection}`;
        
        // í˜¸ê°ë„ ë³€í™” ì•Œë¦¼
        if (delta !== 0) {
          const emoji = delta > 0 ? 'ğŸ’•' : 'ğŸ’”';
          const text = delta > 0 ? `í˜¸ê°ë„ +${delta}` : `í˜¸ê°ë„ ${delta}`;
          this.showNotification(text, emoji);
        }
      }

      showNotification(text, emoji = 'ğŸ“¢') {
        // ê¸°ì¡´ ì•Œë¦¼ ì œê±°
        const existing = document.querySelector('.notification');
        if (existing) existing.remove();
        
        const notification = document.createElement('div');
        notification.className = 'notification';
        notification.innerHTML = `<span style="font-size: 20px;">${emoji}</span> ${text}`;
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.style.opacity = '0';
          notification.style.transform = 'translateX(400px)';
          setTimeout(() => notification.remove(), 500);
        }, 2000);
      }

      saveGame() {
        const saveData = {
          currentScene: this.currentScene,
          affection: this.affection,
          history: this.history,
          timestamp: Date.now()
        };
        
        try {
          localStorage.setItem('adventureGameSave', JSON.stringify(saveData));
          this.showNotification('ê²Œì„ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!', 'ğŸ’¾');
        } catch (e) {
          console.error('Save failed:', e);
          this.showNotification('ì €ì¥ ì‹¤íŒ¨!', 'âŒ');
        }
      }

      loadGame() {
        try {
          const saveData = localStorage.getItem('adventureGameSave');
          if (saveData) {
            const data = JSON.parse(saveData);
            this.currentScene = data.currentScene;
            this.affection = data.affection;
            this.history = data.history || [];
            
            // UI ì—…ë°ì´íŠ¸
            const fill = document.getElementById('affection-fill');
            const value = document.getElementById('affection-value');
            const percentage = (this.affection / this.maxAffection) * 100;
            fill.style.width = percentage + '%';
            value.textContent = `${this.affection}/${this.maxAffection}`;
            
            this.showScene(this.currentScene);
            this.showNotification('ê²Œì„ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!', 'ğŸ“');
          } else {
            this.showNotification('ì €ì¥ëœ ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤.', 'âŒ');
          }
        } catch (e) {
          console.error('Load failed:', e);
          this.showNotification('ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨!', 'âŒ');
        }
      }

      resetGame() {
        if (confirm('ì •ë§ë¡œ ê²Œì„ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nëª¨ë“  ì§„í–‰ ìƒí™©ì´ ì‚­ì œë©ë‹ˆë‹¤.')) {
          this.reset();
          this.showScene(this.currentScene);
          this.showNotification('ê²Œì„ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!', 'ğŸ”„');
        }
      }

      reset() {
        this.currentScene = 'start';
        this.affection = 1;
        this.history = [];
        
        // UI ì´ˆê¸°í™”
        const fill = document.getElementById('affection-fill');
        const value = document.getElementById('affection-value');
        fill.style.width = '10%';
        value.textContent = '1/10';
      }

      toggleSkip() {
        this.skipMode = !this.skipMode;
        this.showNotification(
          this.skipMode ? 'ìŠ¤í‚µ ëª¨ë“œ ON' : 'ìŠ¤í‚µ ëª¨ë“œ OFF',
          'â©'
        );
      }
    }

    // ==========================================
    // ê²Œì„ ì‹œì‘
    // ==========================================
    const game = new AdventureGame();
    
    // DOM ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => game.init());
    } else {
      game.init();
    }

    // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
    document.addEventListener('keydown', (e) => {
      // Ctrl/Cmd + í‚¤
      if (e.ctrlKey || e.metaKey) {
        switch(e.key.toLowerCase()) {
          case 's':
            e.preventDefault();
            game.saveGame();
            break;
          case 'l':
            e.preventDefault();
            game.loadGame();
            break;
          case 'r':
            e.preventDefault();
            game.resetGame();
            break;
        }
      }
      // ìŠ¤í˜ì´ìŠ¤ë°” - ìŠ¤í‚µ
      else if (e.key === ' ') {
        e.preventDefault();
        game.toggleSkip();
      }
    });

    // í˜ì´ì§€ ë‚˜ê°€ê¸° ì „ í™•ì¸
    window.addEventListener('beforeunload', (e) => {
      if (game.history.length > 0 && !game.currentScene.includes('ending')) {
        e.preventDefault();
        e.returnValue = 'ì§„í–‰ ì¤‘ì¸ ê²Œì„ì´ ìˆìŠµë‹ˆë‹¤. ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?';
      }
    });

    // ëª¨ë°”ì¼ í„°ì¹˜ ì œìŠ¤ì²˜ ì§€ì›
    let touchStartX = 0;
    let touchStartTime = 0;
    
    document.addEventListener('touchstart', (e) => {
      touchStartX = e.touches[0].clientX;
      touchStartTime = Date.now();
    });

    document.addEventListener('touchend', (e) => {
      const touchEndX = e.changedTouches[0].clientX;
      const touchEndTime = Date.now();
      const diff = touchEndX - touchStartX;
      const timeDiff = touchEndTime - touchStartTime;
      
      // ë¹ ë¥¸ ìŠ¤ì™€ì´í”„ë§Œ ì¸ì‹ (500ms ì´ë‚´)
      if (timeDiff < 500 && Math.abs(diff) > 100) {
        if (diff > 0) {
          // ì˜¤ë¥¸ìª½ ìŠ¤ì™€ì´í”„ - ë¶ˆëŸ¬ì˜¤ê¸°
          game.loadGame();
        } else {
          // ì™¼ìª½ ìŠ¤ì™€ì´í”„ - ì €ì¥
          game.saveGame();
        }
      }
    });

    // ì½˜ì†” ë©”ì‹œì§€
    console.log('%cğŸ® ëŸ¬ë¸ŒìŠ¤í† ë¦¬ ì–´ë“œë²¤ì²˜ ê²Œì„', 'color: #ff6b9d; font-size: 20px; font-weight: bold;');
    console.log('%cë²„ì „ 1.0 | ì œì‘: Your Name', 'color: #a8a8b8;');
    console.log('%cë‹¨ì¶•í‚¤: Ctrl+S(ì €ì¥), Ctrl+L(ë¶ˆëŸ¬ì˜¤ê¸°), Space(ìŠ¤í‚µ)', 'color: #667eea;');
  </script>
</body>
</html>": "start",
            "reset": true
          }
        ]
      },
      
      "friend_ending": {
        "location": "í•™ìƒ ì‹ë‹¹",
        "time": "ì €ë…",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ê°€ ì•„ì‰¬ìš´ ë“¯ ì›ƒìœ¼ë©° ê³ ê°œë¥¼ ë„ë•ì¸ë‹¤.\n\n\"ê·¸ë˜, ì¢‹ì€ ì¹œêµ¬ê°€ ë˜ì.\"\n\në‘˜ì€ ì¦ê²ê²Œ ì €ë…ì„ ë¨¹ìœ¼ë©° ëŒ€í™”ë¥¼ ë‚˜ëˆˆë‹¤.\nì•ìœ¼ë¡œë„ ì¢‹ì€ ì¹œêµ¬ë¡œ ì§€ë‚¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.\n\nğŸ˜Š êµ¿ ì—”ë”© - ì¢‹ì€ ì¹œêµ¬ ğŸ˜Š",
        "ending": true,
        "choices": [
          {
            "text": "ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",
            "tone": "ğŸ”„",
            "next": "start",
            "reset": true
          }
        ]
      },
      
      "promise_ending": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì˜¤í›„ 5ì‹œ",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ê°€ í–‰ë³µí•œ í‘œì •ìœ¼ë¡œ ì†ì„ í”ë“ ë‹¤.\n\n\"ë‚´ì¼ ë´! ì˜¤ëŠ˜ ì •ë§ ì¦ê±°ì› ì–´.\"\n\nìƒˆë¡œìš´ ì¸ì—°ì´ ì‹œì‘ë˜ëŠ” ê²ƒ ê°™ë‹¤.\n\nğŸ’ êµ¿ ì—”ë”© - ì•½ì†ëœ ë‚´ì¼ ğŸ’",
        "ending": true,
        "choices": [
          {
            "text": "ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",
            "tone": "ğŸ”„",
            "next": "start",
            "reset": true
          }
        ]
      },
      
      "casual_ending": {
        "location": "ëŒ€í•™êµ",
        "time": "ì €ë…",
        "character": "ë¯¸ë‚˜",
        "text": "ë¯¸ë‚˜ê°€ ë°ê²Œ ì›ƒìœ¼ë©° ì‘ë³„ ì¸ì‚¬ë¥¼ í•œë‹¤.\n\nê°€ë”ì”© ë§Œë‚  ìˆ˜ ìˆëŠ” ì¢‹ì€ ì¹œêµ¬ê°€ ìƒê²¼ë‹¤.\n\nğŸ“š ë…¸ë©€ ì—”ë”© - ìŠ¤í„°ë”” ë©”ì´íŠ¸ ğŸ“š",
        "ending": true,
        "choices": [
          {
            "text": "ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",
            "tone": "ğŸ”„",
            "next": "start",
            "reset": true
          }
        ]
      },
      
      "neutral_ending": {
        "location": "ëŒ€í•™êµ ë„ì„œê´€",
        "time": "ì €ë…",
        "character": "ë¯¸ë‚˜",
        "text": "í‰ë²”í•œ í•˜ë£¨ê°€ ëë‚¬ë‹¤.\n\ní•˜ì§€ë§Œ ì™ ì§€ ê¸°ë¶„ ì¢‹ì€ ë§Œë‚¨ì´ì—ˆë‹¤.\n\nğŸ“– ë…¸ë©€ ì—”ë”© - í‰ë²”í•œ í•˜ë£¨ ğŸ“–",
        "ending": true,
        "choices": [
          {
            "text": "ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",
            "tone": "ğŸ”„",
            "next